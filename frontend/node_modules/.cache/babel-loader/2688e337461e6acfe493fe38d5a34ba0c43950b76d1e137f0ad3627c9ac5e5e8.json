{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.map.js\";\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue';\nimport * as echarts from 'echarts';\nexport default {\n  props: {\n    chartData: {\n      type: Object,\n      default: () => ({\n        xAxis: ['星期一', '星期二', '星期三', '星期四', '星期五', '星期六', '星期日'],\n        series: [{\n          name: '已处理',\n          data: [32, 22, 30, 40, 21, 20, 3]\n        }, {\n          name: '未处理',\n          data: [12, 5, 7, 3, 2, 1, 0]\n        }]\n      })\n    }\n  },\n  setup(props) {\n    const chart = ref(null);\n    let myChart = null;\n    const updateChart = () => {\n      if (!myChart || !chart.value) return;\n      const option = {\n        color: ['#7B68EE', '#FF9F7F'],\n        grid: {\n          containLabel: true\n        },\n        tooltip: {\n          trigger: 'axis',\n          backgroundColor: 'rgba(50, 50, 50, 0.7)',\n          borderColor: '#333',\n          textStyle: {\n            color: '#fff'\n          }\n        },\n        xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: props.chartData.xAxis,\n          axisLine: {\n            show: false\n          },\n          axisLabel: {\n            color: '#eee'\n          }\n        },\n        yAxis: {\n          type: 'value',\n          axisLine: {\n            show: false\n          },\n          axisTick: {\n            show: false\n          },\n          splitLine: {\n            lineStyle: {\n              color: 'rgba(255, 255, 255, 0.1)'\n            }\n          },\n          axisLabel: {\n            color: '#eee'\n          }\n        },\n        series: props.chartData.series.map(series => ({\n          ...series,\n          type: 'line',\n          symbolSize: 8,\n          lineStyle: {\n            width: 1\n          },\n          emphasis: {\n            focus: 'series'\n          }\n        })),\n        legend: {\n          data: props.chartData.series.map(s => s.name),\n          left: \"center\",\n          bottom: \"bottom\",\n          textStyle: {\n            color: '#eee'\n          },\n          itemWidth: 15,\n          itemHeight: 10\n        }\n      };\n\n      // 使用 setOption 的第二个参数 notMerge: true 确保完整刷新\n      myChart.setOption(option, true);\n    };\n    const initChart = () => {\n      if (!chart.value) return;\n      if (!myChart) {\n        myChart = echarts.init(chart.value);\n        window.addEventListener(\"resize\", handleResize);\n      }\n      updateChart();\n    };\n    const handleResize = () => {\n      myChart && myChart.resize();\n    };\n    onMounted(() => {\n      initChart();\n    });\n    onBeforeUnmount(() => {\n      window.removeEventListener(\"resize\", handleResize);\n      if (myChart) {\n        myChart.dispose();\n        myChart = null;\n      }\n    });\n    watch(() => props.chartData, () => {\n      if (myChart) {\n        updateChart();\n      } else {\n        initChart();\n      }\n    }, {\n      deep: true,\n      immediate: true\n    });\n    return {\n      chart\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","onBeforeUnmount","watch","echarts","props","chartData","type","Object","default","xAxis","series","name","data","setup","chart","myChart","updateChart","value","option","color","grid","containLabel","tooltip","trigger","backgroundColor","borderColor","textStyle","boundaryGap","axisLine","show","axisLabel","yAxis","axisTick","splitLine","lineStyle","map","symbolSize","width","emphasis","focus","legend","s","left","bottom","itemWidth","itemHeight","setOption","initChart","init","window","addEventListener","handleResize","resize","removeEventListener","dispose","deep","immediate"],"sources":["E:\\Wuhuairline\\frontend\\src\\components\\LineChart.vue"],"sourcesContent":["<template>\n  <div ref=\"chart\" class=\"chart-container\"></div>\n</template>\n\n<script>\nimport { ref, onMounted, onBeforeUnmount, watch } from 'vue';\nimport * as echarts from 'echarts';\n\nexport default {\n  props: {\n    chartData: {\n      type: Object,\n      default: () => ({\n        xAxis: ['星期一', '星期二', '星期三', '星期四', '星期五', '星期六', '星期日'],\n        series: [\n          {\n            name: '已处理',\n            data: [32, 22, 30, 40, 21, 20, 3]\n          },\n          {\n            name: '未处理',\n            data: [12, 5, 7, 3, 2, 1, 0]\n          }\n        ]\n      })\n    }\n  },\n  setup(props) {\n    const chart = ref(null);\n    let myChart = null;\n\n    const updateChart = () => {\n      if (!myChart ||!chart.value) return;\n\n      const option = {\n        color: ['#7B68EE', '#FF9F7F'],\n        grid: {\n          containLabel: true\n        },\n        tooltip: {\n          trigger: 'axis',\n          backgroundColor: 'rgba(50, 50, 50, 0.7)',\n          borderColor: '#333',\n          textStyle: {\n            color: '#fff'\n          }\n        },\n        xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: props.chartData.xAxis,\n          axisLine: { show: false },\n          axisLabel: { color: '#eee' }\n        },\n        yAxis: {\n          type: 'value',\n          axisLine: { show: false },\n          axisTick: { show: false },\n          splitLine: {\n            lineStyle: {\n              color: 'rgba(255, 255, 255, 0.1)'\n            }\n          },\n          axisLabel: { color: '#eee' }\n        },\n        series: props.chartData.series.map(series => ({\n          ...series,\n          type: 'line',\n          symbolSize: 8,\n          lineStyle: { width: 1 },\n          emphasis: { focus: 'series' }\n        })),\n        legend: {\n          data: props.chartData.series.map(s => s.name),\n          left: \"center\",\n          bottom: \"bottom\",\n          textStyle: { color: '#eee' },\n          itemWidth: 15,\n          itemHeight: 10\n        }\n      };\n\n      // 使用 setOption 的第二个参数 notMerge: true 确保完整刷新\n      myChart.setOption(option, true);\n    };\n\n    const initChart = () => {\n      if (!chart.value) return;\n\n      if (!myChart) {\n        myChart = echarts.init(chart.value);\n        window.addEventListener(\"resize\", handleResize);\n      }\n\n      updateChart();\n    };\n\n    const handleResize = () => {\n      myChart && myChart.resize();\n    };\n\n    onMounted(() => {\n      initChart();\n    });\n\n    onBeforeUnmount(() => {\n      window.removeEventListener(\"resize\", handleResize);\n      if (myChart) {\n        myChart.dispose();\n        myChart = null;\n      }\n    });\n\n    watch(() => props.chartData, () => {\n      if (myChart) {\n        updateChart();\n      } else {\n        initChart();\n      }\n    }, { deep: true, immediate: true });\n\n    return { chart };\n  }\n};\n</script>\n\n<style scoped>\n.chart-container {\n  width: 100%;\n  height: 340px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}